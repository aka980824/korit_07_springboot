## 테이블 간의 관계 추가
car 테이블과 일대다(1:N) 관계에 있는 owner라는 새 테이블을 만들겁니다. 일대다 관계는 소유자가 한 명이 자동차 여러 대를 가질 수 있지만, 한 자동차의 소유자는 한 명이라는 의미입니다.

domain 패키지에 Owner이라는 엔티티 클래스와 OwnerRepository라는 repository 인터페이스를 만들어야 합니다. 그리고 OwnerRepository는 JpaReposiotry를 상속 받아야 합니다.

이상의 관계를 추가시 `@ManyToOne` `@OneToMany` 에너테이션 을 이용해야합니다.
외래키를 포함한 Car 에티티 클래스에서는 `@ManyToOne` 을 사용 예정(이것 때문에 부분 복사하였음.) 외래캐를 이용하기에, 필드 구성이 달라짐

DB 적으로 보았을 때 Car table에다가 외래키인 ownerId를 추가하는 개념이기에, car entity class 에는 Owner 관련 필드를 추가해야합니다. 그렇다면 새로 추가된 필드에 대한 getter/setter 역시 요구됨
모든 JOIN  관계에서는 FetchType.LAZY가 기본값으로 정의할 필요가 없지만 대일 관계일 경우에는 반드시 명시가 필요

FetchType : 데이터베이스에서 데이터를 검색하는 전략을 정의. 속성값으로는

    EAGER : 즉시 검색
    LAZY : 지연 검색

지연 검색은 데이터베이스에서 소유자를 검색하면 필요 시 해당 소유자와 관련된 모든 자동차를 검색한다는 의미. 반면 즉시 검색은 해당 소유자의 모든 자동차를 즉시 검색

``` car

package com.example.cardatabase.domain;

import jakarta.persistence.*;
import lombok.Data;
import lombok.NoArgsConstructor;

@NoArgsConstructor
@Data
@Entity
public class Car {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    private String brand, model, color, registrationNumber;
    private int modelYear, price;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "owner")
    private Owner owner;

    public Car(String brand, String model, String color,
               String registrationNumber, int modelYear, int price) {
        this.brand = brand;
        this.model = model;
        this.color = color;
        this.registrationNumber = registrationNumber;
        this.modelYear = modelYear;
        this.price = price;
    }
}

```

``` onwer
 @OneToMany(cascade = CascadeType.ALL, mappedBy = "owner")
    private List<Car> cars;
```
이상의 코드에서 `@Data` 를 달아둔 경우에 일부러 겹치지만 Owner와 관련된 getter/setter를 코드에 작성하였음. 반면에 getter/setter를 명시해둔 Owner클래스에서는 cars관련 getter/setter를 사용하지 않음.
당연히 프로젝트시, setOwner()/ getOwner()를 코드로 쓸 필요가 없음

Onwer class의 `@OneToMany` 에너테이션에는 특징이있음
1. cascade의 속성은 삭제. 업데이트시 연속 효과가 적용되는 방법을 지정
    - ALL을 설정하게 되면 모든 작업이 연속적으로 적용
    - 예를 들어 Owner 를 삭제시 그 소유자와 연결된 Car 객체들도 삭제됨
2. mappedBy="owner" 속성 설정 : car 클래승 사이에 이 관계의 외래 키인 owenr필드가 존재함을 명시함

SQL을 배운 저희가 어색하게 느낄수 있는 점은 ownerId 필드 하나만 가지고 와서 연결 짓는게 아닌, Owner 클래스 통째로 가져와 Car에 field로 삼는다는 점임.

## h2- Maria DB에 저장